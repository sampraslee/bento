<div class="all articles">
	<h1 class="p-3 d-flex justify-content-center">All YOUR Articles</h1>
</div>

<% count = current_user.feed_count %>
<% current_user.feeds.reverse.each do |feed| %>
  <h3 class="p-2 m-2 d-flex justify-content-center">Week <%= count %></h3>

    <div id="carousel<%= count %>" class="carousel slide carousel-fade" data-ride="carousel">
      <div class="carousel-inner"> 

        <div class="carousel-item active data-interval='200' d-flex justify-content-center">
              <% if feed.article %>
                <div class="card rounded shadow-lg m-2" style="width: 30rem;">
                  <div class="card-body d-flex align-items-center flex-column">
                    <h5 class="card-title">Article</h5>
                      <div class="container-image d-flex w-100 justify-content-center">
                        <img src="<%= feed.article.image %>" class="image card-img-top">
                      </div>
                        <p class="mt-4"><%= feed.article.title %></p>
                        <a href="<%= feed.article.link %>" data-check="card-first<%= count %>" target="_blank" class="m-2 card-link btn btn-primary rounded">Go to Article</a>
                        <img src="https://previews.123rf.com/images/johan2011/johan20111309/johan2011130900007/21934213-ok-the-dude-giving-thumb-up-next-to-a-check-mark-blue.jpg" id="card-first<%= count %>" width="35" class="check d-none">
                    </div>
                  </div>
              <% end %>
        </div>

        <div class="carousel-item data-interval='200' d-flex justify-content-center ">
              <% if feed.podcast %>
                <div class="card rounded shadow-lg m-2" style="width: 30rem;">
                  <div class="card-body d-flex align-items-center flex-column">
                    <h5 class="card-title">Podcast</h5>
                    <div class="container-image d-flex w-100 justify-content-center">
                      <img src="<%= feed.podcast.images %>" class="image card-img-top">
                    </div>
                      <p class="mt-4"><%= feed.podcast.creator %></p>
                      <a href="<%= feed.podcast.link %>" data-check="card-second<%= count %>"" target="_blank" class="m-2 card-link btn btn-primary rounded">Go to Podcast</a>
                      <img src="https://previews.123rf.com/images/johan2011/johan20111309/johan2011130900007/21934213-ok-the-dude-giving-thumb-up-next-to-a-check-mark-blue.jpg" id="card-second<%= count %>"" width="35" class="check d-none">
                  </div>
                </div>
              <% end %>
        </div>
  
        <div class="carousel-item data-interval='200' d-flex justify-content-center ">
              <% if feed.video %>
                <div class="card rounded shadow-lg m-2" style="width: 30rem;">
                  <div class="card-body d-flex align-items-center flex-column">
                    <h5 class="card-title">Video</h5>
                    <div class="container-image d-flex w-100 justify-content-center">
                      <iframe width="180rem" src="<%= feed.video.url.gsub(/watch\?v=/, 'embed/') %>" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                      <p class="card-text mt-4"><%= feed.video.title %></p>
                      <a href="<%= feed.video.url %>" data-check="card-third<%= count %>"" target="_blank" class="m-2 card-link btn btn-primary rounded">Go to Video</a>
                      <img src="https://previews.123rf.com/images/johan2011/johan20111309/johan2011130900007/21934213-ok-the-dude-giving-thumb-up-next-to-a-check-mark-blue.jpg" id="card-third<%= count %>""  width="35" class="check d-none">
                  </div>
                </div>
              <% end %>
        </div>

        <div class="carousel-item data-interval='200' d-flex justify-content-center mt-4">
              <% if feed.project %>
                <img src="https://c10.patreonusercontent.com/3/eyJ3Ijo0MDB9/patreon-media/p/reward/2405863/34751822ea764582b281025eb818ea47/1?token-time=2145916800&token-hash=jRgeu052RAcUd-v33db60Wt4HmE2fGy0l4V7p-gyCSM%3D" height="250" class="">
                <div class="carousel-caption d-md-block text-dark p-0">
                  <p>
                    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapse<%= count %>"" aria-expanded="false" aria-controls="collapseExample" data-check="card-fourth<%= count %>"">
                      <%= feed.project.title %>
                    </button>
                  </p>
                  <div class="collapse" id="collapse<%= count %>"">
                    <div class="card card-body shadow-lg border-0">
                       <p class="m-0""><%= feed.project.description %></p>
                    </div>
                  </div>
                </div>
                <img src="https://previews.123rf.com/images/johan2011/johan20111309/johan2011130900007/21934213-ok-the-dude-giving-thumb-up-next-to-a-check-mark-blue.jpg" id="card-fourth<%= count %>""  width="35" class="check d-none">
              <% end %>
        </div>
   
      </div>

        <a class="carousel-control-prev" href="#carousel<%= count %>" role="button" data-slide="prev">
          <span class="carousel-control-prev-icon bg-danger border border-danger rounded-circle p-3" aria-hidden="true"></span>
        </a>
        <a class="carousel-control-next" href="#carousel<%= count %>" role="button" data-slide="next">
          <span class="carousel-control-next-icon bg-danger border border-danger rounded-circle p-3" aria-hidden="true"></span>
        </a>

    </div>
    <% count -= 1 %>
  <% end %>


<script>
	$(".card-link").click(function (e){
		$("#" + e.target.dataset.check).removeClass("d-none")
	})

</script>
